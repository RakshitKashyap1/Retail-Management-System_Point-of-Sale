{% extends 'base.html' %}
{% load currency_tags %}

{% block title %}Sales History - RMS POS{% endblock %}

{% block content %}
<style>
    .receipt-id {
        font-family: monospace;
        color: #4facfe;
        font-weight: 600;
    }

    .amount-display {
        font-weight: 700;
        color: #a8e063;
        font-size: 1.1rem;
    }

    .cashier-avatar {
        width: 24px;
        height: 24px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.7rem;
    }
</style>

<div class="page-header">
    <div>
        <h1 class="page-title">Sales History</h1>
        <p class="page-subtitle">View all past receipts and transactions</p>
    </div>
</div>

<div class="card">
    <div class="card-body" style="padding: 0;">
        <div class="table-responsive">
            <table>
                <thead>
                    <tr>
                        <th>Receipt #</th>
                        <th>Date & Time</th>
                        <th>Cashier</th>
                        <th>Items</th>
                        <th>Total Amount</th>
                    </tr>
                </thead>
                <tbody>
                    {% for sale in sales %}
                    <tr>
                        <td>
                            <span class="receipt-id">#{{ sale.receipt_number|default:sale.id }}</span>
                        </td>
                        <td style="color: #b0b3c1;">
                            {{ sale.created_at|date:"M d, Y H:i" }}
                        </td>
                        <td>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <div class="cashier-avatar">
                                    {{ sale.cashier.username|slice:":1"|upper }}
                                </div>
                                {{ sale.cashier.username }}
                            </div>
                        </td>
                        <td>
                            <div style="display: flex; flex-direction: column; gap: 0.25rem;">
                                {% for item in sale.items.all %}
                                <div style="font-size: 0.9rem;">
                                    <span style="color: #e8eaed;">{{ item.product.name }}</span>
                                    <span style="color: #6b6e7d;">x{{ item.quantity }}</span>
                                </div>
                                {% endfor %}
                            </div>
                        </td>
                        <td>
                            <span class="amount-display">{{ sale.total_amount|rupee_paise }}</span>
                        </td>
                    </tr>
                    {% empty %}
                    <tr>
                        <td colspan="5" style="text-align: center; padding: 3rem; color: #6b6e7d;">
                            No sales found yet.
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}